<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>가위바위보 게임</title>
        <script>
            // 컴퓨터와 가위 바위 보 게임
            // 컴퓨터: 랜덤하게 가위(1), 바위(2), 보(3)를 낸다.
            // 유저: 가위, 바위, 보 중에 select하고 [선택] 버튼을 누른다.
            // 게임 결과 출력, 승률 출력

            let game = 0;
            let win = 0;
            let lose = 0;
            let draw = 0;
            let rate;

            function replay() {
                for (let i = 0; i < 3000; i++) {
                    gameStart();
                }
            }

            function gameStart() {
                // console.log("함수 호출");

                // console.log(document.getElementById("userSelectVal").value);
                // value값이 없다면 요소의 컨텐트 값이 불림

                let users = Number(
                    document.getElementById("userSelectVal").value
                );
                let computers = Math.floor(Math.random() * 3 + 1); // 1, 2, 3
                console.log(users, computers);

                let usersImg;
                let computersImg;
                let result;

                switch (users) {
                    case 1:
                        usersImg = "/css/img/rockscissorspager/rock.png";
                        break;
                    case 2:
                        usersImg = "/css/img/rockscissorspager/paper.png";
                        break;
                    case 3:
                        usersImg = "/css/img/rockscissorspager/scissors.png";
                        break;
                }

                switch (computers) {
                    case 1:
                        computersImg = "/css/img/rockscissorspager/rock.png";
                        break;
                    case 2:
                        computersImg = "/css/img/rockscissorspager/paper.png";
                        break;
                    case 3:
                        computersImg =
                            "/css/img/rockscissorspager/scissors.png";
                        break;
                }
                console.log(usersImg);
                console.log(usersImg);

                document.getElementById("usersImg").src = usersImg;
                document.getElementById("computersImg").src = computersImg;

                if (users == computers) {
                    result = "무승부";
                    draw += 1;
                } else {
                    if (
                        (users == 1 && computers == 2) ||
                        (users == 2 && computers == 3) ||
                        (users == 3 && computers == 1)
                    ) {
                        result = "컴퓨터승";
                        lose += 1;
                    } else {
                        result = "유저승";
                        win += 1;
                    }
                }
                game++;

                rate = (win / (win + lose)) * 100;
                document.getElementById("result").innerHTML = result;

                document.getElementById("game").innerHTML = game;
                document.getElementById("win").innerHTML = win;
                document.getElementById("lose").innerHTML = lose;
                document.getElementById("draw").innerHTML = draw;
                document.getElementById("rate").innerHTML = rate;
            }
        </script>
        <style>
            img {
                width: 200px;
            }
        </style>
    </head>
    <body>
        <h1>가위, 바위, 보!</h1>
        <div class="userInput">
            <select id="userSelectVal">
                <option value="1">바위</option>
                <option value="2">보</option>
                <option value="3">가위</option>
            </select>
            <input type="button" value="선택" onclick="replay()" />
        </div>
        <table border="1">
            <tr>
                <th>User</th>
                <th>Computer</th>
            </tr>
            <tr>
                <td id="user">
                    <img
                        id="usersImg"
                        src="/css/img/rockscissorspager/none.png"
                    />
                </td>
                <td id="computer">
                    <img
                        id="computersImg"
                        src="/css/img/rockscissorspager/none.png"
                    />
                </td>
            </tr>
        </table>
        <div id="result">결과는?</div>

        <div>
            총 전적: <span id="game">0</span>전 <span id="win">0</span>승
            <span id="lose">0</span>패 <span id="draw">0</span>무 승률
            <span id="rate">0</span>%
        </div>
    </body>
</html>
